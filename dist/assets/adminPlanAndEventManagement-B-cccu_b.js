import{r as m,a2 as A,u as ae,j as e,e as re,z as F,am as _,a5 as ie,n as oe,I as pe}from"./index-os3KaEe5.js";import{p as ce}from"./index-Dydz_S93.js";import{c as z}from"./clsx-B-dksMZM.js";import"./index-Chjiymov.js";function Q(a){return c=>!!c.type&&c.type.tabsRole===a}const L=Q("Tab"),M=Q("TabList"),K=Q("TabPanel");function ge(a){return L(a)||M(a)||K(a)}function Y(a,c){return m.Children.map(a,t=>t===null?null:ge(t)?c(t):t.props&&t.props.children&&typeof t.props.children=="object"?m.cloneElement(t,Object.assign({},t.props,{children:Y(t.props.children,c)})):t)}function U(a,c){return m.Children.forEach(a,t=>{t!==null&&(L(t)||K(t)?c(t):t.props&&t.props.children&&typeof t.props.children=="object"&&(M(t)&&c(t),U(t.props.children,c)))})}function de(a,c,t){let r,l=0,o=0,x=!1;const f=[],y=a[c];return U(y,u=>{M(u)&&(u.props&&u.props.children&&typeof u.props.children=="object"&&U(u.props.children,h=>f.push(h)),x&&(r=new Error("Found multiple 'TabList' components inside 'Tabs'. Only one is allowed.")),x=!0),L(u)?((!x||f.indexOf(u)===-1)&&(r=new Error("Found a 'Tab' component outside of the 'TabList' component. 'Tab' components have to be inside the 'TabList' component.")),l++):K(u)&&o++}),!r&&l!==o&&(r=new Error(`There should be an equal number of 'Tab' and 'TabPanel' in \`${t}\`. Received ${l} 'Tab' and ${o} 'TabPanel'.`)),r}function he(a,c,t,r,l){const o=a[c],x=l||c;let f=null;return o&&typeof o!="function"?f=new Error(`Invalid ${r} \`${x}\` of type \`${typeof o}\` supplied to \`${t}\`, expected \`function\`.`):a.selectedIndex!=null&&o==null&&(f=new Error(`The ${r} \`${x}\` is marked as required in \`${t}\`, but its value is \`undefined\` or \`null\`.
\`onSelect\` is required when \`selectedIndex\` is also set. Not doing so will make the tabs not do anything, as \`selectedIndex\` indicates that you want to handle the selected tab yourself.
If you only want to set the inital tab replace \`selectedIndex\` with \`defaultIndex\`.`)),f}function ye(a,c,t,r,l){const o=a[c],x=l||c;let f=null;if(o!=null&&typeof o!="number")f=new Error(`Invalid ${r} \`${x}\` of type \`${typeof o}\` supplied to \`${t}\`, expected \`number\`.`);else if(a.defaultIndex!=null&&o!=null)return new Error(`The ${r} \`${x}\` cannot be used together with \`defaultIndex\` in \`${t}\`.
Either remove \`${x}\` to let \`${t}\` handle the selected tab internally or remove \`defaultIndex\` to handle it yourself.`);return f}function ue(a){let c=0;return U(a,t=>{L(t)&&c++}),c}const je=["children","className","disabledTabClassName","domRef","focus","forceRenderTabPanel","onSelect","selectedIndex","selectedTabClassName","selectedTabPanelClassName","environment","disableUpDownKeys","disableLeftRightKeys"];function ve(a,c){if(a==null)return{};var t={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(c.includes(r))continue;t[r]=a[r]}return t}function me(a){return a&&"getAttribute"in a}function ne(a){return me(a)&&a.getAttribute("data-rttab")}function $(a){return me(a)&&a.getAttribute("aria-disabled")==="true"}let q;function Ne(a){const c=a||(typeof window<"u"?window:void 0);try{q=!!(typeof c<"u"&&c.document&&c.document.activeElement)}catch{q=!1}}const we={className:"react-tabs",focus:!1},Ce={children:de},ke=a=>{ce.checkPropTypes(Ce,a,"prop","UncontrolledTabs");let c=m.useRef([]),t=m.useRef([]);const r=m.useRef();function l(i,d){if(i<0||i>=u())return;const{onSelect:p,selectedIndex:C}=a;p(i,C,d)}function o(i){const d=u();for(let p=i+1;p<d;p++)if(!$(h(p)))return p;for(let p=0;p<i;p++)if(!$(h(p)))return p;return i}function x(i){let d=i;for(;d--;)if(!$(h(d)))return d;for(d=u();d-- >i;)if(!$(h(d)))return d;return i}function f(){const i=u();for(let d=0;d<i;d++)if(!$(h(d)))return d;return null}function y(){let i=u();for(;i--;)if(!$(h(i)))return i;return null}function u(){const{children:i}=a;return ue(i)}function h(i){return c.current[`tabs-${i}`]}function N(){let i=0;const{children:d,disabledTabClassName:p,focus:C,forceRenderTabPanel:n,selectedIndex:b,selectedTabClassName:v,selectedTabPanelClassName:s,environment:g}=a;t.current=t.current||[];let W=t.current.length-u();const O=m.useId();for(;W++<0;)t.current.push(`${O}${t.current.length}`);return Y(d,I=>{let H=I;if(M(I)){let S=0,Z=!1;q==null&&Ne(g);const ee=g||(typeof window<"u"?window:void 0);q&&ee&&(Z=A.Children.toArray(I.props.children).filter(L).some((te,V)=>ee.document.activeElement===h(V))),H=m.cloneElement(I,{children:Y(I.props.children,te=>{const V=`tabs-${S}`,se=b===S,G={tabRef:be=>{c.current[V]=be},id:t.current[S],selected:se,focus:se&&(C||Z)};return v&&(G.selectedClassName=v),p&&(G.disabledClassName=p),S++,m.cloneElement(te,G)})})}else if(K(I)){const S={id:t.current[i],selected:b===i};n&&(S.forceRender=n),s&&(S.selectedClassName=s),i++,H=m.cloneElement(I,S)}return H})}function k(i){const{direction:d,disableUpDownKeys:p,disableLeftRightKeys:C}=a;if(j(i.target)){let{selectedIndex:n}=a,b=!1,v=!1;(i.code==="Space"||i.keyCode===32||i.code==="Enter"||i.keyCode===13)&&(b=!0,v=!1,D(i)),!C&&(i.keyCode===37||i.code==="ArrowLeft")||!p&&(i.keyCode===38||i.code==="ArrowUp")?(d==="rtl"?n=o(n):n=x(n),b=!0,v=!0):!C&&(i.keyCode===39||i.code==="ArrowRight")||!p&&(i.keyCode===40||i.code==="ArrowDown")?(d==="rtl"?n=x(n):n=o(n),b=!0,v=!0):i.keyCode===35||i.code==="End"?(n=y(),b=!0,v=!0):(i.keyCode===36||i.code==="Home")&&(n=f(),b=!0,v=!0),b&&i.preventDefault(),v&&l(n,i)}}function D(i){let d=i.target;do if(j(d)){if($(d))return;const p=[].slice.call(d.parentNode.children).filter(ne).indexOf(d);l(p,i);return}while((d=d.parentNode)!=null)}function j(i){if(!ne(i))return!1;let d=i.parentElement;do{if(d===r.current)return!0;if(d.getAttribute("data-rttabs"))break;d=d.parentElement}while(d);return!1}const w=Object.assign({},we,a),{className:T,domRef:P}=w,E=ve(w,je);return A.createElement("div",Object.assign({},E,{className:z(T),onClick:D,onKeyDown:k,ref:i=>{r.current=i,P&&P(i)},"data-rttabs":!0}),N())},Te=["children","defaultFocus","defaultIndex","focusTabOnClick","onSelect"];function Pe(a,c){if(a==null)return{};var t={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(c.includes(r))continue;t[r]=a[r]}return t}const De=0,R=1,Ee={children:de,onSelect:he,selectedIndex:ye},Se={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},Ie=a=>a.selectedIndex===null?R:De,fe=a=>{ce.checkPropTypes(Ee,a,"prop","Tabs");const c=Object.assign({},Se,a),{children:t,defaultFocus:r,defaultIndex:l,focusTabOnClick:o,onSelect:x}=c,f=Pe(c,Te),[y,u]=m.useState(r),[h]=m.useState(Ie(f)),[N,k]=m.useState(h===R?l||0:null);if(m.useEffect(()=>{u(!1)},[]),h===R){const w=ue(t);m.useEffect(()=>{if(N!=null){const T=Math.max(0,w-1);k(Math.min(N,T))}},[w])}const D=(w,T,P)=>{typeof x=="function"&&x(w,T,P)===!1||(o&&u(!0),h===R&&k(w))};let j=Object.assign({},a,f);return j.focus=y,j.onSelect=D,N!=null&&(j.selectedIndex=N),delete j.defaultFocus,delete j.defaultIndex,delete j.focusTabOnClick,A.createElement(ke,j,t)};fe.tabsRole="Tabs";const $e=["children","className"];function Ae(a,c){if(a==null)return{};var t={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(c.includes(r))continue;t[r]=a[r]}return t}const Oe={className:"react-tabs__tab-list"},xe=a=>{const c=Object.assign({},Oe,a),{children:t,className:r}=c,l=Ae(c,$e);return A.createElement("ul",Object.assign({},l,{className:z(r),role:"tablist"}),t)};xe.tabsRole="TabList";const Le=["children","className","disabled","disabledClassName","focus","id","selected","selectedClassName","tabIndex","tabRef"];function Fe(a,c){if(a==null)return{};var t={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(c.includes(r))continue;t[r]=a[r]}return t}const X="react-tabs__tab",Re={className:X,disabledClassName:`${X}--disabled`,focus:!1,id:null,selected:!1,selectedClassName:`${X}--selected`},B=a=>{let c=m.useRef();const t=Object.assign({},Re,a),{children:r,className:l,disabled:o,disabledClassName:x,focus:f,id:y,selected:u,selectedClassName:h,tabIndex:N,tabRef:k}=t,D=Fe(t,Le);return m.useEffect(()=>{u&&f&&c.current.focus()},[u,f]),A.createElement("li",Object.assign({},D,{className:z(l,{[h]:u,[x]:o}),ref:j=>{c.current=j,k&&k(j)},role:"tab",id:`tab${y}`,"aria-selected":u?"true":"false","aria-disabled":o?"true":"false","aria-controls":`panel${y}`,tabIndex:N||(u?"0":null),"data-rttab":!0}),r)};B.tabsRole="Tab";const _e=["children","className","forceRender","id","selected","selectedClassName"];function Ue(a,c){if(a==null)return{};var t={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(c.includes(r))continue;t[r]=a[r]}return t}const le="react-tabs__tab-panel",qe={className:le,forceRender:!1,selectedClassName:`${le}--selected`},J=a=>{const c=Object.assign({},qe,a),{children:t,className:r,forceRender:l,id:o,selected:x,selectedClassName:f}=c,y=Ue(c,_e);return A.createElement("div",Object.assign({},y,{className:z(r,{[f]:x}),role:"tabpanel",id:`panel${o}`,"aria-labelledby":`tab${o}`}),l||x?t:null)};J.tabsRole="TabPanel";const ze=()=>{var v;const[a,c]=m.useState([]),[t,r]=m.useState({title:"",tag:"",description:"",price:"",sessions:"",features:[],highlight:!1,Plantype:"counselling",expiryDate:new Date().toISOString().split("T")[0]}),[l,o]=m.useState(null),[x,f]=m.useState(!1),[y,u]=m.useState(""),[h,N]=m.useState(null),{AddPlan:k,GetPlan:D,UpdatePlan:j,DeletePlan:w,user:T}=ae();m.useEffect(()=>{P()},[]);const P=async()=>{try{const s=await D();c(s||[])}catch(s){console.error("Failed to fetch plans:",s)}},E=()=>{y.trim()&&(l?o(s=>({...s,features:[...s.features,y.trim()]})):r(s=>({...s,features:[...s.features,y.trim()]})),u(""))},i=s=>{l?o(g=>({...g,features:g.features.filter((W,O)=>O!==s)})):r(g=>({...g,features:g.features.filter((W,O)=>O!==s)}))},d=async()=>{try{const s={title:t.title,description:t.description,price:t.price,Plantype:t.Plantype};t.Plantype==="tool"&&(s.link=t.link),t.Plantype==="counselling"&&(s.tag=t.tag,s.sessions=t.sessions,s.features=t.features,s.highlight=t.highlight,s.expiryDate=new Date(t.expiryDate)),await k(s),P(),f(!1),r({title:"",tag:"",description:"",price:"",sessions:"",features:[],highlight:!1,Plantype:"counselling",expiryDate:new Date().toISOString().split("T")[0]})}catch(s){console.error("Failed to create plan:",s)}},p=async()=>{try{const s={title:l.title,description:l.description,price:l.price,Plantype:l.Plantype};l.Plantype==="tool"&&(s.link=l.link),l.Plantype==="counselling"&&(s.tag=l.tag,s.sessions=l.sessions,s.features=l.features,s.highlight=l.highlight,s.expiryDate=new Date(l.expiryDate)),await j(l._id,s),P(),o(null)}catch(s){console.error("Failed to update plan:",s)}},C=async s=>{try{await w(s),P(),N(null)}catch(g){console.error("Failed to delete plan:",g)}},n=s=>{r(g=>({...g,Plantype:s,...s==="tool"&&{tag:"",sessions:"",features:[],highlight:!1,expiryDate:""}}))},b=s=>{o(g=>({...g,Plantype:s,...s==="tool"&&{tag:"",sessions:"",features:[],highlight:!1,expiryDate:""}}))};return e.jsxs("div",{className:"p-4 md:p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Plan Management"}),e.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center w-full sm:w-auto justify-center",children:[e.jsx(re,{className:"mr-2"})," Add New Plan"]})]}),x&&e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Add New Plan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title*"}),e.jsx("input",{type:"text",value:t.title,onChange:s=>r({...t,title:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plan Type*"}),e.jsxs("select",{value:t.Plantype,onChange:s=>n(s.target.value),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"counselling",children:"Counselling"}),e.jsx("option",{value:"tool",children:"Tool"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price*"}),e.jsx("input",{type:"text",value:t.price,onChange:s=>r({...t,price:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.Plantype==="counselling"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tag"}),e.jsx("input",{type:"text",value:t.tag,onChange:s=>r({...t,tag:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sessions"}),e.jsx("input",{type:"text",value:t.sessions,onChange:s=>r({...t,sessions:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Expiry Date*"}),e.jsx("input",{type:"date",value:t.expiryDate,onChange:s=>r({...t,expiryDate:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.highlight,onChange:s=>r({...t,highlight:s.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"block text-sm font-medium",children:"Highlight"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:s=>r({...t,description:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Link or Url"}),e.jsx("textarea",{value:t.link,onChange:s=>r({...t,link:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3"})]})]}),t.Plantype==="counselling"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Features"}),e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:y,onChange:s=>u(s.target.value),className:"flex-1 p-2 border rounded-l focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add a feature",onKeyPress:s=>s.key==="Enter"&&E()}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-r hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.features.map((s,g)=>e.jsxs("div",{className:"flex items-center bg-gray-100 px-3 py-1 rounded-full",children:[e.jsx("span",{className:"text-sm",children:s}),e.jsx("button",{onClick:()=>i(g),className:"ml-2 text-red-500 hover:text-red-700 focus:outline-none",children:e.jsx(F,{size:14})})]},g))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 border rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsxs("button",{onClick:d,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx(_,{className:"mr-2"})," Save Plan"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Expiry Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Highlight"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"font-medium",children:s.title}),s.tag&&e.jsx("div",{className:"text-sm text-gray-500",children:s.tag})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap hidden sm:table-cell",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.Plantype==="counselling"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:s.Plantype})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.price}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap hidden md:table-cell",children:s.Plantype==="counselling"&&s.expiryDate?new Date(s.expiryDate).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap hidden sm:table-cell",children:s.Plantype==="counselling"?e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.highlight?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.highlight?"Yes":"No"}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:"N/A"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o({...s,expiryDate:s.Plantype==="counselling"&&s.expiryDate?new Date(s.expiryDate).toISOString().split("T")[0]:""}),className:"text-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1","aria-label":"Edit",children:e.jsx(ie,{size:18})}),e.jsx("button",{onClick:()=>N(s._id),className:"text-red-600 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 rounded p-1","aria-label":"Delete",children:e.jsx(oe,{size:18})})]})})]},s._id))})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-medium text-lg",children:"Edit Plan"}),e.jsx("button",{onClick:()=>o(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(F,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title*"}),e.jsx("input",{type:"text",value:l.title,onChange:s=>o({...l,title:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plan Type*"}),e.jsxs("select",{value:l.Plantype,onChange:s=>b(s.target.value),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"counselling",children:"Counselling"}),e.jsx("option",{value:"tool",children:"Tool"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price*"}),e.jsx("input",{type:"text",value:l.price,onChange:s=>o({...l,price:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),l.Plantype==="counselling"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tag"}),e.jsx("input",{type:"text",value:l.tag||"",onChange:s=>o({...l,tag:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sessions"}),e.jsx("input",{type:"text",value:l.sessions||"",onChange:s=>o({...l,sessions:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Expiry Date*"}),e.jsx("input",{type:"date",value:l.expiryDate||new Date().toISOString().split("T")[0],onChange:s=>o({...l,expiryDate:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:l.Plantype==="counselling",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.highlight||!1,onChange:s=>o({...l,highlight:s.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"block text-sm font-medium",children:"Highlight"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:s=>o({...l,description:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Link or Url"}),e.jsx("textarea",{value:l.link,onChange:s=>o({...l,link:s.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3"})]})]}),l.Plantype==="counselling"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Features"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(v=l.features)==null?void 0:v.map((s,g)=>e.jsxs("div",{className:"flex items-center bg-gray-100 px-3 py-1 rounded-full",children:[e.jsx("span",{className:"text-sm",children:s}),e.jsx("button",{onClick:()=>i(g),className:"ml-2 text-red-500 hover:text-red-700 focus:outline-none",children:e.jsx(F,{size:14})})]},g))}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:y,onChange:s=>u(s.target.value),className:"flex-1 p-2 border rounded-l focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add a feature",onKeyPress:s=>s.key==="Enter"&&E()}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-r hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{onClick:()=>o(null),className:"px-4 py-2 border rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsxs("button",{onClick:p,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx(_,{className:"mr-2"})," Save Changes"]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-6",children:"Are you sure you want to delete this plan? This action cannot be undone."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{onClick:()=>N(null),className:"px-4 py-2 border rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{onClick:()=>C(h),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Delete Plan"})]})]})})]})},Ve=()=>{const[a,c]=m.useState([]),[t,r]=m.useState({title:"",description:"",date:"",endDate:"",location:"",type:"workshop",maxAttendees:"",registrationLink:"",imageUrl:""}),[l,o]=m.useState(null),[x,f]=m.useState(!1),[y,u]=m.useState(0),{user:h,fetchEvents:N,createEvent:k,updateEvent:D,deleteEvent:j,getEventAttendees:w}=ae();m.useEffect(()=>{T()},[]);const T=async()=>{try{const n=await N();c(n)}catch(n){console.error("Failed to fetch events:",n)}},P=async()=>{try{const n={...t,date:new Date(t.date).toISOString(),endDate:new Date(t.endDate).toISOString()};await k(n)&&(await T(),f(!1),r({title:"",description:"",date:"",endDate:"",location:"",type:"workshop",maxAttendees:"",registrationLink:"",imageUrl:""}))}catch(n){console.error("Failed to create event:",n)}},E=async()=>{try{const n={...l,date:new Date(l.date).toISOString(),endDate:new Date(l.endDate).toISOString()};await D(l._id,n)&&(await T(),o(null))}catch(n){console.error("Failed to update event:",n)}},i=async n=>{try{await j(n)&&await T()}catch(b){console.error("Failed to delete event:",b)}},d=async n=>{try{const b=await w(n);console.log("Attendees:",b),alert(`Viewing attendees for event ${n}`)}catch(b){console.error("Failed to fetch attendees:",b)}},p=n=>{const b={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(n).toLocaleDateString("en-US",b)},C=(n,b)=>{const v=new Date;return v<new Date(n)?"Upcoming":v>new Date(b)?"Completed":"Ongoing"};return e.jsx("div",{className:"p-4 bg-white rounded-lg shadow",children:e.jsxs(fe,{selectedIndex:y,onSelect:n=>u(n),children:[e.jsxs(xe,{className:"flex border-b border-gray-200",children:[e.jsx(B,{className:"px-4 py-2 font-medium cursor-pointer focus:outline-none",selectedClassName:"border-b-2 border-blue-500 text-blue-600",children:"Plans"}),e.jsx(B,{className:"px-4 py-2 font-medium cursor-pointer focus:outline-none",selectedClassName:"border-b-2 border-blue-500 text-blue-600",children:"Events"})]}),e.jsx(J,{children:e.jsx(ze,{})}),e.jsxs(J,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Event Management"}),e.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center w-full sm:w-auto justify-center",children:[e.jsx(re,{className:"mr-2"})," Add New Event"]})]}),x&&e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Add New Event"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title*"}),e.jsx("input",{type:"text",value:t.title,onChange:n=>r({...t,title:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description*"}),e.jsx("textarea",{value:t.description,onChange:n=>r({...t,description:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date & Time*"}),e.jsx("input",{type:"datetime-local",value:t.date,onChange:n=>r({...t,date:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date & Time*"}),e.jsx("input",{type:"datetime-local",value:t.endDate,onChange:n=>r({...t,endDate:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location*"}),e.jsx("input",{type:"text",value:t.location,onChange:n=>r({...t,location:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type*"}),e.jsxs("select",{value:t.type,onChange:n=>r({...t,type:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"workshop",children:"Workshop"}),e.jsx("option",{value:"webinar",children:"Webinar"}),e.jsx("option",{value:"seminar",children:"Seminar"}),e.jsx("option",{value:"meetup",children:"Meetup"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Attendees"}),e.jsx("input",{type:"number",min:"1",value:t.maxAttendees,onChange:n=>r({...t,maxAttendees:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration Link"}),e.jsx("input",{type:"url",value:t.registrationLink,onChange:n=>r({...t,registrationLink:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image URL"}),e.jsx("input",{type:"url",value:t.imageUrl,onChange:n=>r({...t,imageUrl:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 border rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsxs("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx(_,{className:"mr-2"})," Create Event"]})]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-medium text-lg",children:"Edit Event"}),e.jsx("button",{onClick:()=>o(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(F,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title*"}),e.jsx("input",{type:"text",value:l.title,onChange:n=>o({...l,title:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description*"}),e.jsx("textarea",{value:l.description,onChange:n=>o({...l,description:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date & Time*"}),e.jsx("input",{type:"datetime-local",value:l.date,onChange:n=>o({...l,date:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date & Time*"}),e.jsx("input",{type:"datetime-local",value:l.endDate,onChange:n=>o({...l,endDate:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location*"}),e.jsx("input",{type:"text",value:l.location,onChange:n=>o({...l,location:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type*"}),e.jsxs("select",{value:l.type,onChange:n=>o({...l,type:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"workshop",children:"Workshop"}),e.jsx("option",{value:"webinar",children:"Webinar"}),e.jsx("option",{value:"seminar",children:"Seminar"}),e.jsx("option",{value:"meetup",children:"Meetup"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Attendees"}),e.jsx("input",{type:"number",min:"1",value:l.maxAttendees,onChange:n=>o({...l,maxAttendees:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration Link"}),e.jsx("input",{type:"url",value:l.registrationLink,onChange:n=>o({...l,registrationLink:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image URL"}),e.jsx("input",{type:"url",value:l.imageUrl,onChange:n=>o({...l,imageUrl:n.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{onClick:()=>o(null),className:"px-4 py-2 border rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsxs("button",{onClick:E,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx(_,{className:"mr-2"})," Save Changes"]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(n=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"font-medium",children:n.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:n.description})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap hidden sm:table-cell",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 capitalize",children:n.type})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm",children:p(n.date)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap hidden md:table-cell",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${C(n.date,n.endDate)==="Upcoming"?"bg-yellow-100 text-yellow-800":C(n.date,n.endDate)==="Ongoing"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:C(n.date,n.endDate)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o({...n,date:new Date(n.date).toISOString().slice(0,16),endDate:new Date(n.endDate).toISOString().slice(0,16)}),className:"text-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1","aria-label":"Edit",children:e.jsx(ie,{size:18})}),e.jsx("button",{onClick:()=>i(n._id),className:"text-red-600 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 rounded p-1","aria-label":"Delete",children:e.jsx(oe,{size:18})}),e.jsx("button",{onClick:()=>d(n._id),className:"text-purple-600 hover:text-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500 rounded p-1","aria-label":"View Attendees",children:e.jsx(pe,{size:18})})]})})]},n._id))})]})})]})]})})};export{Ve as default};
