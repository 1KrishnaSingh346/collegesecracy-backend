import{O as y,a as b,u as j,r as c,V as o,j as i,P as N}from"./index-os3KaEe5.js";import{C as w}from"./circle-check-big-Db7JZ0ze.js";import{C as k}from"./circle-x-BrExIrCI.js";const T=()=>{const[d]=y(),t=b(),f=j(e=>e.verifyEmail),[s,r]=c.useState("loading"),[x,n]=c.useState("Verifying your email..."),[g,l]=c.useState(""),m=d.get("token"),u=d.get("email"),a=d.get("type");c.useEffect(()=>{if(!m||!u||!a||a==="reset"){r("error"),n("Invalid verification link"),o.error("Invalid or unsupported verification request."),setTimeout(()=>t("/login"),5e3);return}f(m,u,a).then(e=>{e!=null&&e.success?(r("success"),n("Email verified successfully!"),o.success("Email verified!"),l("Redirecting to login..."),setTimeout(()=>t("/login"),3e3)):e!=null&&e.alreadyVerified?(r("success"),n("Email already verified"),o.success("Already verified."),l("Taking you to login..."),setTimeout(()=>t("/login"),3e3)):(r("error"),n("Verification failed"),o.error((e==null?void 0:e.message)||"Verification failed."),l(a==="activation"?"Redirecting to login to request new verification":"Redirecting to signup to try again"),setTimeout(()=>t(a==="activation"?"/login":"/signup"),5e3))}).catch(e=>{console.error("Verification Error:",e),r("error"),n("Verification error"),o.error("Error verifying email."),l("Redirecting to login..."),setTimeout(()=>t("/login"),5e3)})},[m,u,a,f,t]);const h=()=>s==="loading"?i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-900/30 flex items-center justify-center",children:i.jsx(N,{className:"w-8 h-8 animate-spin text-blue-400"})}),i.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400 border-t-transparent animate-spin"})]}):s==="success"?i.jsx("div",{className:"animate-bounce-in",children:i.jsx(w,{className:"w-16 h-16 text-green-500"})}):i.jsx(k,{className:"w-16 h-16 text-red-500 animate-pulse"}),p=Array.from({length:30}).map((e,v)=>({id:v,size:Math.random()*3+1,left:Math.random()*100,top:Math.random()*100,delay:Math.random()*5,duration:Math.random()*10+10}));return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center px-4 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden opacity-40",children:p.map(e=>i.jsx("div",{className:"absolute rounded-full bg-white animate-twinkle",style:{width:`${e.size}px`,height:`${e.size}px`,left:`${e.left}%`,top:`${e.top}%`,animationDelay:`${e.delay}s`,animationDuration:`${e.duration}s`}},e.id))}),i.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-sm border border-gray-700 shadow-xl rounded-xl p-6 md:p-8 max-w-md w-full text-center space-y-6 z-10",children:[i.jsx("div",{className:"flex justify-center",children:h()}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:x}),s==="loading"&&i.jsx("p",{className:"text-gray-400 text-sm",children:"Validating your email verification token..."}),s==="error"&&i.jsxs("p",{className:"text-gray-400 text-sm",children:["This link is invalid or expired. Verification links are time-limited.",i.jsx("br",{className:"hidden sm:block"}),"Please go to"," ",i.jsx("span",{className:"text-blue-400 font-medium",children:a==="activation"?"login":"signup"})," ","to request a new verification email."]}),s==="success"&&i.jsxs("p",{className:"text-gray-400 text-sm",children:["Your email has been successfully verified.",i.jsx("br",{className:"hidden sm:block"}),"You can now access all features."]})]}),g&&i.jsx("div",{className:"pt-2 border-t border-gray-700",children:i.jsx("p",{className:"text-gray-500 text-sm animate-pulse",children:g})})]})]})};export{T as default};
