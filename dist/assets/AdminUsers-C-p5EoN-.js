import{u as G,r,j as e,a0 as H,a1 as j,a2 as f,a3 as N,z as D,a4 as K,m as Q,a5 as Y,n as Z,a6 as m}from"./index-os3KaEe5.js";import{S as i}from"./skeleton-CmXXhd2Y.js";function d(n){if(!n)return"Unknown";const x={year:"numeric",month:"short",day:"numeric"};return new Date(n).toLocaleDateString(void 0,x)}const te=()=>{var $,R,E,M;const{AllUsers:n,fetchAllUsers:x,isfetchingUser:O,AllFeedbackList:B,updateFeedBackStatus:z}=G(),[o,J]=r.useState(""),[t,y]=r.useState(null),[p,v]=r.useState(!1),[g,b]=r.useState(1),[w,k]=r.useState([]),[V,C]=r.useState(!1),h=10,F=async s=>{y(s),await A(s._id)},S=()=>{y(null),k([])},A=async s=>{C(!0);try{const a=await B(s);k(a)}catch{m.error("Failed to load feedbacks")}finally{C(!1)}},P=async(s,a)=>{try{await z(s,{status:a}),m.success(`Feedback marked as ${a}`),t&&await A(t._id)}catch{m.error("Failed to update feedback status")}},W=async()=>{v(!0);try{await x(),m.success("User data refreshed")}catch{m.error("Failed to refresh data")}finally{v(!1)}};r.useEffect(()=>{x()},[x]);const c=(n==null?void 0:n.filter(s=>{var a,l,_;return((a=s.fullName)==null?void 0:a.toLowerCase().includes(o.toLowerCase()))||((l=s.email)==null?void 0:l.toLowerCase().includes(o.toLowerCase()))||((_=s.role)==null?void 0:_.toLowerCase().includes(o.toLowerCase()))}))||[],u=g*h,L=u-h,I=c.slice(L,u),T=Math.ceil(c.length/h),X=()=>e.jsx("div",{className:"border rounded-lg p-4 shadow-sm bg-white",children:e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx(i,{circle:!0,width:40,height:40}),e.jsxs("div",{className:"ml-3 min-w-0",children:[e.jsx(i,{width:120,height:16}),e.jsx(i,{width:80,height:12,className:"mt-1"})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(i,{width:60,height:20}),e.jsx(i,{width:50,height:20})]})]})}),q=()=>e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:[...Array(5)].map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{circle:!0,width:40,height:40}),e.jsxs("div",{className:"ml-4",children:[e.jsx(i,{width:100,height:16}),e.jsx(i,{width:80,height:12,className:"mt-1"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(i,{width:120,height:16})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(i,{width:60,height:24})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(i,{width:60,height:24})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(i,{width:80,height:16})})]},a))})]});return e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"User Management"}),e.jsx("button",{onClick:W,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",disabled:p,children:e.jsx(H,{className:`w-5 h-5 text-indigo-600 ${p?"animate-spin":""}`})})]}),e.jsxs("div",{className:"relative w-full md:w-auto",children:[e.jsx("input",{type:"text",placeholder:"Search users...",className:"pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 w-full md:w-64",value:o,onChange:s=>J(s.target.value)}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),O||p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden space-y-4",children:[...Array(5)].map((s,a)=>e.jsx(X,{},a))}),e.jsx("div",{className:"hidden md:block",children:e.jsx(q,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden space-y-4",children:I.map(s=>{var a,l;return e.jsx("div",{className:"border rounded-lg p-4 shadow-sm bg-white hover:shadow-md transition-shadow cursor-pointer",onClick:()=>F(s),children:e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full overflow-hidden bg-indigo-100 flex items-center justify-center",children:(a=s.profilePic)!=null&&a.url?e.jsx("img",{src:s.profilePic.url,alt:s.fullName||"User",className:"h-full w-full object-cover"}):e.jsx("span",{className:"text-indigo-600 font-medium text-lg",children:((l=s.fullName)==null?void 0:l.charAt(0))||"U"})}),e.jsxs("div",{className:"ml-3 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:s.fullName||"Unknown"}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s.email||"No email"})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full
                      ${s.role==="admin"?"bg-purple-100 text-purple-800":s.role==="mentor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:s.role==="mentee"?"Student":s.role}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full
                      ${s.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.active?"Active":"Inactive"})]})]})},s._id)})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(s=>{var a,l;return e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>F(s),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-indigo-100 flex items-center justify-center",children:(a=s.profilePic)!=null&&a.url?e.jsx("img",{src:s.profilePic.url,alt:s.fullName||"User",className:"h-full w-full object-cover"}):e.jsx("span",{className:"text-indigo-600 font-medium",children:((l=s.fullName)==null?void 0:l.charAt(0))||"U"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.fullName||"Unknown"}),e.jsx("div",{className:"text-xs text-gray-500",children:s.phone||"No phone"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("div",{className:"truncate max-w-xs",children:s.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs font-semibold rounded-full 
                        ${s.role==="admin"?"bg-purple-100 text-purple-800":s.role==="mentor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:s.role==="mentee"?"Student":s.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs font-semibold rounded-full 
                        ${s.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d(s.createdAt)})]},s._id)})})]})})]}),e.jsx(j,{appear:!0,show:!!t,as:f.Fragment,children:e.jsxs(N,{as:"div",className:"relative z-50",onClose:S,children:[e.jsx(j.Child,{as:f.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(j.Child,{as:f.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(N.Panel,{className:"w-full max-w-md md:max-w-2xl transform overflow-hidden rounded-2xl bg-white p-4 md:p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start border-b pb-3",children:[e.jsxs(N.Title,{as:"h3",className:"text-lg md:text-xl font-semibold text-gray-900",children:[t==null?void 0:t.fullName," - User Details"]}),e.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500",onClick:S,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(D,{className:"h-5 w-5 md:h-6 md:w-6"})]})]}),e.jsxs("div",{className:"mt-4 space-y-4 max-h-[70vh] overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:t==null?void 0:t.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:(t==null?void 0:t.phone)||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Location"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:(t==null?void 0:t.location)||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Date of Birth"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:t!=null&&t.dateOfBirth?d(t.dateOfBirth):"Not provided"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Role"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1 capitalize",children:t==null?void 0:t.role})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1
                            ${t!=null&&t.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t!=null&&t.active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Joined On"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:d(t==null?void 0:t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Last Active"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:d(t==null?void 0:t.lastActive)})]})]})]}),(t==null?void 0:t.role)!=="admin"&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"Counseling Plans"}),(($=t==null?void 0:t.counselingPlans)==null?void 0:$.length)>0?e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-1 scrollbar-hide",children:t.counselingPlans.map((s,a)=>e.jsxs("div",{className:"border p-2 rounded bg-white",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900",children:s.planName}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium
                                    ${s.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.active?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Purchased: ",d(s.purchasedOn)]})]},a))}):e.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"No counseling plans purchased"})]}),(t==null?void 0:t.role)!=="admin"&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"Premium Tools"}),((R=t==null?void 0:t.premiumTools)==null?void 0:R.length)>0?e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-1 scrollbar-hide",children:t.premiumTools.map((s,a)=>e.jsxs("div",{className:"border p-2 rounded bg-white",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900",children:s.toolName}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium
                                    ${s.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.active?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Purchased: ",d(s.purchasedOn)]})]},a))}):e.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"No premium tools purchased"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"User Feedback"}),V?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"})}):w.length>0?e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-1 scrollbar-hide",children:w.map(s=>e.jsxs("div",{className:"border p-3 rounded bg-white",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(a=>e.jsx(K,{className:`h-4 w-4 ${s.starRating>=a?"text-yellow-500 fill-current":"text-gray-300"}`},a)),e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800",children:s.category})]}),e.jsx("span",{className:"text-xs text-gray-500",children:d(s.createdAt)})]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-700 mt-2",children:s.message}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("span",{className:`text-xs font-medium ${s.status==="approved"?"text-green-600":s.status==="rejected"?"text-red-600":"text-yellow-600"}`,children:s.status}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>P(s._id,"approved"),className:"text-green-600 hover:text-green-800 text-xs flex items-center",children:[e.jsx(Q,{className:"mr-1"})," Approve"]}),e.jsxs("button",{onClick:()=>P(s._id,"rejected"),className:"text-red-600 hover:text-red-800 text-xs flex items-center",children:[e.jsx(D,{className:"mr-1"})," Reject"]})]})]})]},s._id))}):e.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"No feedback submitted"})]}),(t==null?void 0:t.role)==="mentor"&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"Mentor Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"College"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:(t==null?void 0:t.collegeName)||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"College ID"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:(t==null?void 0:t.collegeId)||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Expertise"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:((E=t==null?void 0:t.expertise)==null?void 0:E.join(", "))||"None specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Verification Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1
                              ${(t==null?void 0:t.verificationStatus)==="verified"?"bg-green-100 text-green-800":(t==null?void 0:t.verificationStatus)==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:(t==null?void 0:t.verificationStatus)||"Not verified"})]})]})]}),(t==null?void 0:t.role)==="mentee"&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"Student Information"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-500",children:"Interests"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-900 mt-1",children:((M=t==null?void 0:t.interests)==null?void 0:M.join(", "))||"None specified"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsxs("button",{onClick:()=>{},className:"px-3 py-1 md:px-4 md:py-2 border border-gray-300 rounded-md shadow-sm text-xs md:text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none",children:[e.jsx(Y,{className:"inline mr-1 md:mr-2"})," Edit"]}),e.jsxs("button",{onClick:()=>{},className:"px-3 py-1 md:px-4 md:py-2 border border-transparent rounded-md shadow-sm text-xs md:text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none",children:[e.jsx(Z,{className:"inline mr-1 md:mr-2"})," Delete"]})]})]})})})})]})}),c.length>h&&e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mt-4 px-4 md:px-6 py-3 bg-gray-50 rounded-b-lg",children:[e.jsxs("div",{className:"text-xs md:text-sm text-gray-700 mb-2 md:mb-0",children:["Showing ",L+1," to ",Math.min(u,c.length)," of ",c.length," users"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>b(s=>Math.max(s-1,1)),disabled:g===1,className:"px-2 py-1 md:px-3 md:py-1 border rounded-md text-xs md:text-sm font-medium disabled:opacity-50 hover:bg-gray-100",children:"Previous"}),e.jsx("button",{onClick:()=>b(s=>Math.min(s+1,T)),disabled:g===T,className:"px-2 py-1 md:px-3 md:py-1 border rounded-md text-xs md:text-sm font-medium disabled:opacity-50 hover:bg-gray-100",children:"Next"})]})]})]})};export{te as default};
